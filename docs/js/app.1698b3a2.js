(function(e){function t(t){for(var n,a,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],o[a]&&p.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"04ba":function(e,t,r){e.exports=r.p+"img/legend.296d6e7a.png"},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=r("bb71");r("da64");n["a"].use(o["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-content",[r("Graph")],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"explorerContainer"},[n("img",{attrs:{id:"legend",src:r("04ba"),alt:"legend"}}),e.cluster?n("div",{attrs:{id:"cluster"}},[n("h3",{staticClass:"text-xs-center"},[e._v("\n      You are watching everything within the Cluster:\n      "),n("span",[e._v(e._s(e.cluster))])])]):e._e(),n("div",{ref:"graph",attrs:{id:"graph"}}),n("div",{attrs:{id:"btns"}},[n("v-btn",{attrs:{id:"reloadBtn",color:"warning"},on:{click:e.reload}},[e._v("\n      "+e._s(e.reloadBtnText)+"\n    ")]),e.displayDemo?n("v-btn",{attrs:{id:"demoBtn",color:"primary"},on:{click:e.enableDemo}},[e._v("\n      "+e._s(e.demoBtnText)+"\n    ")]):e._e(),n("v-btn",{attrs:{id:"physicsBtn",color:"secondary"},on:{click:e.swapPhysics}},[e._v("\n      "+e._s(e.physicsText)+"\n    ")]),n("v-slider",{staticClass:"slider",attrs:{min:"100",max:"500",label:"edge length","inverse-label":"","thumb-label":""},model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}})],1),n("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-card-text",[e._v("\n        "+e._s(e.dialogText)+"\n        "),"Please stand by"===e.dialogText?n("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white",indeterminate:""}}):e._e()],1)],1)],1)],1)},c=[],l=(r("8e6e"),r("456d"),r("75fc")),u=(r("7514"),r("386d"),r("ac6a"),r("bd86")),d=r("2f62"),p=r("e9a8"),h=r.n(p),f=r("dd61"),b=r.n(f),g=r("2769"),m=r.n(g),y=r("a8fc"),v=r.n(y),O=r("6cd4"),w=r.n(O);function _(e){var t=function e(t){var r;w()(e.data,function(r){var n=r[t];w()(n,function(t){m()(e.graph.nodes,function(e){return e.label===t.label})||e.graph.nodes.push(t)})});var n=h()(e.data,function(r){var n=v()(r[t],"label");return b()(n,function(t){var n=m()(e.graph.nodes,function(e){return e.label===t.label});return{from:r.id,to:(n||t).id}})});(r=e.graph.edges).push.apply(r,Object(l["a"])(n));var o=h()(e.data,function(e){return e[t]});return e.data=o,e};return t.data=e,t.graph={nodes:Object(l["a"])(t.data),edges:[]},t}r("28a5");var j=r("2ef0");function k(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach(function(t){Object(u["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var T={fixed:!1,clickable:!0,size:25},P=E({},T,{group:"city",mass:5}),D=E({},T,{group:"topics",mass:3}),S=E({},T,{group:"challenge",mass:2}),x=E({},T,{group:"clusters",mass:5}),A={clickable:!1,fixed:!0,physics:!1,size:25},C=[E({},P,{},A,{label:"city"}),E({},x,{},A,{label:"cluster"}),E({},S,{},A,{label:"challenge"}),E({},D,{},A,{label:"topic"})];function M(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach(function(t){Object(u["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var B,I=function(e){var t=0;return Object(j["map"])(e,function(e){var r=e.City,n=e.Description,o=e.topics,i=e.Title,a=e.keywords;return{city:r,description:n,title:i,keywords:o.split(", ").filter(function(e){return""!==e}),topics:a.split(", ").filter(function(e){return""!==e}),id:++t,label:r}})},L=function(e){return Object(j["filter"])(Object(j["map"])(Object(j["uniqBy"])(e,"city"),function(e){return e.city}),function(e){return""!==e})},R=function(e,t){var r=L(e),n=0;return Object(j["compact"])(Object(j["map"])(r,function(r){var o=Object(j["filter"])(e,function(e){return e.city===r&&Object(j["includes"])(e.topics,t)});return o.length<=0?null:H({challenges:Object(j["map"])(o,function(e){return H({},e,{},S,{label:e.title,id:++n,keywords:Object(j["map"])(e.keywords,function(e){return H({},D,{label:e,id:++n})})})})},P,{label:r,id:++n})}))},$=function(e){var t=L(e),r=0;return Object(j["map"])(t,function(t){var n=Object(j["filter"])(e,function(e){return e.city===t}),o=Object(j["flatMap"])(n,function(e){return e.topics});return H({},P,{label:t,id:++r,topics:Object(j["map"])(o,function(e){return H({},x,{label:e,id:++r})})})})},z=r("4f27"),W={MUTATE_RAW_DATA:"mutate_raw_data",FETCH_SPREADSHEET_DATA:"fetch_spreadsheet",HANDLE_CLICK:"handle_click",RESET_BUTTON:"reset_button",SWAP_DEMO:"swap_demo_mode",SWAP_PHYSICS:"swap_physics",MUTATE_EDGE_LENGTH:"edge_length"};function N(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach(function(t){Object(u["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U=(B={},Object(u["a"])(B,W.MUTATE_RAW_DATA,function(e,t){var r=t.feed;e.feed=r;var n=I(r);console.log(n),e.raw_data=n;var o=_($(n))("topics"),i=o.graph;e.graph={nodes:new z["DataSet"](i.nodes),edges:new z["DataSet"](i.edges)}}),Object(u["a"])(B,W.HANDLE_CLICK,function(e,t){if(t){e.reloadBtnText="back";var r=V({},t);e.selected_cluster=r;var n=_(R(e.raw_data,r.label))("challenges")("keywords"),o=n.graph,i=new z["DataSet"](o.nodes),a=new z["DataSet"](o.edges);e.options.edges.length=200,e.options.nodes.font.size=32,e.graph={nodes:i,edges:a}}}),Object(u["a"])(B,W.RESET_BUTTON,function(e){e.options.edges.length=500,e.options.nodes.font.size=24,e.reloadBtnText="reload"}),Object(u["a"])(B,W.SWAP_DEMO,function(e){e.demo=!e.demo}),Object(u["a"])(B,W.SWAP_PHYSICS,function(e){var t=e.options;t.physics.enabled=!t.physics.enabled}),Object(u["a"])(B,W.MUTATE_EDGE_LENGTH,function(e,t){var r=e.options;r.edges.length=t}),B),G=(r("96cf"),r("3b8d")),F=r("54c0"),Y=Object(u["a"])({},W.FETCH_SPREADSHEET_DATA,function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,console.log("hello world"),n=new F,n.parse("1adKrrgn-KxFe1mWHUXZEDvu23BIzHE2wLk2YfIQjzbM").then(function(e){console.log(e),r(W.MUTATE_RAW_DATA,{feed:e}),r(W.RESET_BUTTON)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),K={get_network:function(e){var t=e.graph;return t},get_options:function(e){var t=e.options;return t},reloadBtnText:function(e){var t=e.reloadBtnText;return t},cities:function(e){var t=e.cities;return t},selected_cities:function(e){var t=e.selected_cities;return t},cluster:function(e){var t=e.selected_cluster;return t.label},demoBtnText:function(e){var t=e.demo;return t?"Disable Demo":"Enable Demo"},physics:function(e){var t=e.options.physics;return t},physicsText:function(e){var t=e.options.physics.enabled;return t?"Disable physics":"Enable physics"},sliderValue:function(e){var t=e.options.edges.length;return t}};n["a"].use(d["a"]);var J=new d["a"].Store({state:{graph:{nodes:[],edges:[]},options:{autoResize:!0,height:"100%",width:"100%",layout:{improvedLayout:!1},physics:{enabled:!0,stabilization:{enabled:!0},repulsion:{nodeDistance:50,centralGravity:.2}},groups:{city:{color:{border:"rgba(43, 222, 200, 0.7)",background:"rgba(43, 222, 200, 0.7)",highlight:{border:"rgba(30, 30, 30, 1)",background:"rgba(43, 222, 200, 1)"}},shape:"hexagon"},clusters:{color:{border:"rgba(252, 60, 60, 0.7)",background:"rgba(252, 60, 60, 0.7)",highlight:{border:"rgba(30, 30, 30, 1)",background:"rgba(252, 60, 60, 1)"}},shape:"hexagon"},topics:{color:{border:"rgba(174, 25, 255, 0.7)",background:"rgba(174, 25, 255, 0.7)",highlight:{border:"rgba(30, 30, 30, 1)",background:"rgba(174, 25, 255, 1)"}},shape:"hexagon"},challenge:{color:{border:"rgba(248, 181, 0, 0.7)",background:"rgba(248, 181, 0, 0.7)",highlight:{border:"rgba(30, 30, 30, 1)",background:"rgba(248, 181, 0, 1)"}},shape:"hexagon"}},edges:{length:500,width:2,arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"cubicBezier",roundness:.75,forceDirection:!0}},nodes:{font:{background:"rgba(0, 0, 0, 0.1)",size:24}},interaction:{hover:!1}},raw_data:{},reloadBtnText:"Reload",demo:!1,selected_cluster:{}},mutations:U,actions:Y,getters:K});function q(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach(function(t){Object(u["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var X={name:"Graph",props:{width:{type:String,default:function(){return"100%"}},height:{type:String,default:function(){return"100%"}}},data:function(){return{events:["doubleClick","selectNode","click","stabilizationIterationsDone","afterDrawing","initRedraw"],network:null,dialog:!1,timeout:null,displayDemo:!1,dialogText:"Please stand by",selectedId:null,displayLegend:!1,sliderCurrentValue:500}},computed:Q({},Object(d["c"])(["demo"]),{},Object(d["b"])(["get_network","get_options","reloadBtnText","cluster","demoBtnText","physics","physicsText","sliderValue"]),{slider:{get:function(){return this.sliderValue},set:function(e){this.sliderCurrentValue=e,this.throttledLengthUpdate()}}}),watch:{get_network:function(e){var t=this;null!==this.network&&this.network.destroy();var r=this.$refs.graph;if(this.displayLegend){var n=-r.clientWidth,o=r.clientHeight-100,i=C.map(function(e){var t=e.font,r=Q({},e,{x:n,y:o,font:Q({},t)});return n+=100,r});e.nodes.add(i)}this.physics.enabled||this.$store.commit(W.SWAP_PHYSICS),this.network=new z["Network"](r,e,this.get_options),e.nodes.forEach(function(r){var n=r.id,o=r.size,i=r.group;if("city"!==i&&"challenge"!==i){var a=t.network.getConnectedEdges(n).length,s=o+6*a;e.nodes.update({id:n,size:s})}}),this.events.forEach(function(e){return t.network.on(e,function(r){return t.handle_event(e,r)})})}},created:function(){},mounted:function(){var e=this;this.dialog=!0,this.$store.state.topic="",this.$store.dispatch(W.FETCH_SPREADSHEET_DATA).catch(function(t){e.dialogText="Error fetching data. Please reload the page.",console.error(t)});var t=window.location.search.substring(1),r=new URLSearchParams(t);r.get("demo")&&(this.displayDemo=!0)},methods:{throttledLengthUpdate:Object(j["throttle"])(function(){this.$store.commit(W.MUTATE_EDGE_LENGTH,this.sliderCurrentValue),this.network.setOptions(this.get_options),this.network.stabilize()},200,{leading:!0}),reload:function(){var e=this;this.dialog=!0,this.demo&&(clearTimeout(this.timeout),this.$store.commit(W.SWAP_DEMO)),this.$store.state.selected_cluster={},this.$store.dispatch(W.FETCH_SPREADSHEET_DATA).catch(function(t){e.dialogText="Error fetching data. Please reload the page.",console.error(t)})},swapPhysics:function(){this.$store.commit(W.SWAP_PHYSICS),this.network.setOptions({physics:this.physics})},handle_event:function(e,t){var r,n,o,i;switch(e){case"doubleClick":r=this.selectedId,n=this.network.body.data.nodes.map(function(e){return e}).find(function(e){return e.id===r&&"clusters"===e.group}),n&&"clusters"===n.group&&(this.dialog=!0,this.physics.enabled||this.swapPhysics(),this.$store.commit(W.HANDLE_CLICK,n)),this.demo&&(clearTimeout(this.timeout),this.$store.commit(W.SWAP_DEMO));break;case"selectNode":r=t.nodes[0],n=this.network.body.data.nodes.map(function(e){return e}).find(function(e){return e.id===r}),this.demo&&(clearTimeout(this.timeout),this.$store.commit(W.SWAP_DEMO)),n.clickable;break;case"click":0!==t.nodes.length||0!==t.edges.length||this.demo?0!==t.nodes.length&&(this.network.unselectAll(),r=t.nodes[0],this.selectedId=r,n=this.network.body.data.nodes.map(function(e){return e}).find(function(e){return e.id===r}),o=[n.id].concat(Object(l["a"])(this.network.getConnectedNodes(n.id))),i=this.network.getConnectedEdges(n.id),this.network.setSelection({nodes:o,edges:i},{highlightEdges:!1})):this.network.fit({animation:{duration:800,easingFunction:"easeInCubic"},scale:1.2});break;case"afterDrawing":this.dialog=!1;break;case"stabilizationIterationsDone":this.swapPhysics();break;case"initRedraw":if(this.$store.state.selected_cluster.label)return;this.createCityCircle();break;default:return}},createCityCircle:function(){var e=this,t=this.get_network.nodes.getIds({filter:function(e){return"city"===e.group}}),r=250,n=2*Math.PI/t.length;t.forEach(function(t,o){var i=r*Math.cos(n*o),a=r*Math.sin(n*o);e.network.moveNode(t,i,a)})},enableDemo:function(){var e=this;if(this.demo)clearTimeout(this.timeout);else{var t=20,r=function t(){var r=e.randomSecs(4,8),n=Object(j["sample"])(e.network.body.data.nodes.map(function(e){return e}).filter(function(e){return e.clickable}));e.network.focus(n.id,{animation:{duration:r,easingFunction:"easeOutCubic"},scale:1.1}),e.timeout=setTimeout(t,r+50)};this.timeout=setTimeout(r,t)}this.$store.commit(W.SWAP_DEMO)},randomSecs:function(e,t){return Math.floor(Math.random()*(1e3*t-1e3*e))+1e3*e}}},Z=X,ee=(r("8e60b"),r("2877")),te=r("6544"),re=r.n(te),ne=r("8336"),oe=r("b0af"),ie=r("99d9"),ae=r("169a"),se=r("8e36"),ce=r("ba0d"),le=Object(ee["a"])(Z,s,c,!1,null,null,null),ue=le.exports;re()(le,{VBtn:ne["a"],VCard:oe["a"],VCardText:ie["a"],VDialog:ae["a"],VProgressLinear:se["a"],VSlider:ce["a"]});var de={name:"App",components:{Graph:ue},data:function(){return{}}},pe=de,he=r("7496"),fe=r("549c"),be=Object(ee["a"])(pe,i,a,!1,null,null,null),ge=be.exports;re()(be,{VApp:he["a"],VContent:fe["a"]}),n["a"].config.productionTip=!1,new n["a"]({store:J,render:function(e){return e(ge)}}).$mount("#app")},"8e60b":function(e,t,r){"use strict";var n=r("af4a"),o=r.n(n);o.a},af4a:function(e,t,r){}});
//# sourceMappingURL=app.1698b3a2.js.map